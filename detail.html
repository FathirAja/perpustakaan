<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Detail Buku</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <!-- Tombol Kembali -->
    <button class="back-btn" onclick="history.back()">â¬… Kembali</button>

    <!-- Detail Buku -->
    <div class="detail-container">
      <img id="bookImage" src="" alt="Cover Buku" class="detail-image" />
      <div class="detail-info">
        <h2 id="bookTitle"></h2>
        <p class="author" id="bookAuthor"></p>
        <p id="bookDesc" class="desc"></p>
        <button class="borrow-btn" onclick="openPopup()">Pinjam Buku</button>
      </div>
    </div>

    <script>
      // Ambil parameter dari URL
      const urlParams = new URLSearchParams(window.location.search);
      document.getElementById("bookTitle").innerText = urlParams.get("judul");
      document.getElementById("bookImage").src = urlParams.get("img");
      document.getElementById("bookAuthor").innerText =
        urlParams.get("penulis");
      document.getElementById("bookDesc").innerText =
        urlParams.get("ringkasan");
      document.getElementById("bookDesc").textContent = ringkasan;

      // Ambil parameter dari URL
      const ringkasan = decodeURIComponent(urlParams.get("ringkasan"));

      // Tampilkan ringkasan dengan paragraf baru otomatis
      const descContainer = document.getElementById("bookDesc");
      const paragraf = ringkasan.split("\n\n"); // pisahkan berdasarkan dua kali enter
      descContainer.innerHTML = paragraf.map((p) => `<p>${p}</p>`).join("");

      function openPopup() {
        const urlParams = new URLSearchParams(window.location.search);
        const judul = urlParams.get("judul");

        document.getElementById(
          "popupText"
        ).textContent = `Kamu meminjam buku: ${judul}`;

        document.getElementById("popup").classList.add("show");
      }

      function closePopup() {
        document.getElementById("popup").classList.remove("show");

        // Tunggu animasi hilang 300ms lalu kembali ke home
        setTimeout(() => {
          window.location.href = "home.html";
        }, 300);
      }
    </script>

    <!-- Popup Modal -->
    <div id="popup" class="popup-overlay">
      <div class="popup-box">
        <h3>Berhasil!</h3>
        <p id="popupText"></p>
        <button class="close-btn" onclick="closePopup()">Tutup</button>
      </div>
    </div>
  </body>
</html>
